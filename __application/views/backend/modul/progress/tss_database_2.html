<div class="row wrapper border-bottom blueaye-bg page-heading">
	<div class="col-lg-10" style='margin-left:20px;'>
		<h3><b>TSS Part 1 of 3</b></h3>
		<ol class="breadcrumb" style='margin-bottom:10px !important;'>
            <li>
                Master Progress
            </li>
            <li class="active">
                <strong>TSS Part 1 of 3</strong>
            </li>
        </ol>		
	</div>
</div>
<div class="wrapper wrapper-content">
	<div class="row">
		<div class="col-lg-12" style='padding-right:0px !important;'>
			
			<div class="ibox">
				<div class="ibox-content" style='padding-bottom:0px !important;'>
					
					<div id='grid_nya_{$submodul}' style='height:400px;width:100%;'>
						<div id='tb_{$submodul}' style='margin-bottom:10px;'>

							<div style='width:100%;margin-bottom: 3px;'>
								
							{*	<label>Phase</label> :
									<select style='width:100px;padding:2px;' id='{$submodul}_phasename'>
										{$tbl_master_phase_tss}
									</select>  
								&nbsp; 
								<br/><label>Site ID</label> :
									<select style='width:150px;padding:2px;' id='{$submodul}_boqno'></select>  
								&nbsp; *}
								<label>Site</label> : <input type='text' style='width:75px;padding:2px;' id='{$submodul}_allfield' /> &nbsp;
								<a href="javascript:void(0)" class="l-btn l-btn-small l-btn-plain" group="" id="search_{$submodul}" onClick="">
									<span class="l-btn-left l-btn-icon-left">
										<span class="l-btn-text">Filter Data</span><span class="l-btn-icon icon-search">&nbsp;</span>
									</span>	
								</a>
								{include file="backend/template/button_grid.html" varbutton="tss"}	
							{*	<a href="javascript:void(0)" style="float: right;" class="l-btn l-btn-small l-btn-plain" group="" id="" onClick="genform('import_data', '{$main}','{$submodul}', 'windowform');">
									<span class="l-btn-left l-btn-icon-left">
										<span class="l-btn-text">Import</span><span class="l-btn-icon icon-import">&nbsp;</span>
									</span>
								</a>	
								<a href="javascript:void(0)" style="float: right;" class="l-btn l-btn-small l-btn-plain" group="" id="exportdata_{$submodul}" onClick="">
									<span class="l-btn-left l-btn-icon-left">
										<span class="l-btn-text">Export</span><span class="l-btn-icon icon-xls">&nbsp;</span>
									</span>
								</a> *}				

							</div>
						</div>
						
						{include file="backend/template/grid.html" tablenya="tbl_database_tss"}
					</div>
					
					<div id='frm_{$submodul}' style='display:none;'></div>
					
					{* <div id='footer_{$submodul}' style="padding:5px;">
						<a href="javascript:void(0)" style="" class="l-btn l-btn-small l-btn-plain" group="" id="" onClick="$('#grid_{$submodul}').datagrid('acceptChanges');$('#grid_{$submodul}').datagrid('reload');">
							<span class="l-btn-left l-btn-icon-left">
								<span class="l-btn-text">Save Editing</span><span class="l-btn-icon icon-save">&nbsp;</span>
							</span>
						</a>
						<a href="javascript:void(0)" style="" class="l-btn l-btn-small l-btn-plain" group="" id="" onClick="$('#grid_{$submodul}').datagrid('rejectChanges');">
							<span class="l-btn-left l-btn-icon-left">
								<span class="l-btn-text">Cancel Editing</span><span class="l-btn-icon icon-no">&nbsp;</span>
							</span>
						</a>
					</div> *}
				<div id='frm_{$submodul}' style='display:none;'></div>
				</div>
			</div>
			
		</div>
	</div>
</div>

<script>
	var submodul = "{$submodul|default:''}";
	var param = {};

//	$('#{$submodul}_phasename').on('change', function(){
//		fillCombo(host+'backend/getfillcombo/phase_siteid', '{$submodul}_boqno', '', $(this).val() );
//	});

	$("#search_{$submodul}").click(function(){
		$('#grid_{$submodul}').datagrid('reload',{
			'table' : 'tbl_database_tss',
		//	'phasename' : $('#{$submodul}_phasename').val(),
		//	'sitename' : $('#{$submodul}_sitename').val(),
			'allfield' 	: $('#{$submodul}_allfield').val(),
		//	'initial_phase' : 'B',
		//	'initial_site' : 'A',
		});
	});
	
	$(document).keypress(function(e) {
		if(e.which == 13) {
			$('#grid_{$submodul}').datagrid('reload',{
			'table' : 'tbl_database_tss',
		//	'phasename' : $('#{$submodul}_phasename').val(),
		//	'sitename' : $('#{$submodul}_sitename').val(),
			'allfield' 	: $('#{$submodul}_allfield').val(),
		//	'initial_phase' : 'B',
		//	'initial_site' : 'A',
			});
		}
	});
	$('#exportdata_{$submodul}').on('click', function(){
		param['table'] = 'tbl_master_tracker_siteinfo';
		param['siteid']   = $('#{$submodul}_siteid').val();
		param['sitename']   = $('#{$submodul}_sitename').val();
		param['regioncode']   = $('#{$submodul}_regioncode').val();
		param['phasename']   = $('#{$submodul}_phasename').val();
		param['siteid']   = $('#{$submodul}_siteid').val();
		param['allfield']    = $('#{$submodul}_allfield').val();
		param['initial_site']   = 'A';
		param['initial_regioncode']   = 'D';
		param['initial_phase']   = 'B';
		
		openWindowWithPostRequest('{$host}backend/exportdatawithtemplate/siteinfo', param);
	});
</script>